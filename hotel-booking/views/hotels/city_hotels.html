{{define "content"}}
<section class="results-shell">
  <div class="results-topbar card panel">
    <div>
      <p class="crumb">Home / Indonesia / {{.City}}</p>
      <h2>{{.City}}: {{len .Hotels}} hotel pilihan</h2>
    </div>
    <a class="btn" href="/">← Kembali ke Beranda</a>
  </div>

  <div class="results-search-wrap">
    <form class="search-panel" method="get" action="/city-hotels">
      <input type="hidden" id="cityInput" name="name" value="{{.City}}" />
      <input type="hidden" id="dateInput" name="date" value="Sen, 23 Feb 2026 - Sel, 24 Feb 2026" />
      <input type="hidden" id="guestInput" name="guest" value="2 Dewasa, 1 Kamar" />
      <div class="search-item">
        <label>Pilih Kota Hotel</label>
        <button class="popup-trigger" data-popup="city" type="button" id="cityTrigger">{{.City}}</button>
      </div>
      <div class="search-item">
        <label>Tanggal Check-in & Check-out</label>
        <button class="popup-trigger" data-popup="date" type="button" id="dateTrigger">Sen, 23 Feb 2026 - Sel, 24 Feb 2026</button>
      </div>
      <div class="search-item">
        <label>Tamu dan Kamar</label>
        <button class="popup-trigger" data-popup="guest" type="button" id="guestTrigger">2 Dewasa, 1 Kamar</button>
      </div>
      <button class="btn btn-primary search-btn" type="submit">SEARCH</button>
    </form>

    <div id="searchPopup" class="search-popup-overlay">
      <div class="search-popup-card">
        <h3 id="popupTitle">Pilih Opsi</h3>
        <div id="popupOptions" class="popup-options"></div>
        <button type="button" class="btn" id="closePopupBtn">Tutup</button>
      </div>
    </div>
  </div>


  <section class="sort-tabs" aria-label="sorting tabs">
    <button class="tab-btn active" type="button">Recommended</button>
    <button class="tab-btn" type="button">Top reviews</button>
    <button class="tab-btn" type="button">Lowest price</button>
    <button class="tab-btn" type="button">Most stars</button>
    <button class="tab-btn" type="button">Nearest first</button>
  </section>

  <div class="search-insight">Kami membandingkan harga dari berbagai partner untuk bantu kamu dapat harga terbaik.</div>

  <div class="results-layout">
    <aside class="filters-panel card">
      <h3>Filter by</h3>
      <p class="filters-sub">Popular filters</p>
      <label><input type="checkbox" /> Sarapan</label>
      <label><input type="checkbox" /> Free WiFi</label>
      <label><input type="checkbox" /> Kolam renang</label>
      <label><input type="checkbox" /> Bintang 4+</label>
      <label><input type="checkbox" /> Dekat pusat kota</label>
    </aside>

    <section id="list-hotel" class="hotel-results-list">
      {{range .Hotels}}
      <article class="result-card" onclick="openHotelModal('{{.Name}}','{{.Description}}','{{.City}}')">
        <div class="result-media">
          <img src="{{.Image}}" alt="{{.Name}}" />
        </div>
        <div class="result-main">
          <h3>{{.Name}}</h3>
          <p class="meta">⭐ {{.Rating}} · {{.City}}</p>
          <p class="desc">{{.Description}}</p>
          <div class="tag-row">
            <span>Free cancellation</span>
            <span>Pay at hotel</span>
            <span>Breakfast option</span>
          </div>
          <div class="partner-row">
            <span>Booking.com</span>
            <span>Agoda</span>
            <span>Traveloka</span>
          </div>
        </div>
        <div class="result-price">
          <p class="cheapest">Harga terbaik mulai</p>
          <strong>Rp {{.PriceStart}}</strong>
          <small>/ malam</small>
          <a class="btn" href="/hotel?id={{.ID}}">Lihat Detail</a>
          <a class="btn btn-primary" href="/rooms?hotel_id={{.ID}}">Pilih Kamar</a>
        </div>
      </article>
      {{end}}
    </section>
  </div>
</section>

<div id="hotelModal" class="modal">
  <div class="modal-content">
    <span class="modal-close" onclick="closeModal()">✖</span>
    <h3 id="mTitle"></h3>
    <p id="mDesc"></p>
    <p id="mCity"></p>
  </div>
</div>
{{end}}
